
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    

    <title>5. Part 5: A More Complex Example: Mandelbrot &mdash; SAGA 0.1-7fffb5f documentation</title>

<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;"/>


    
    <link rel="stylesheet" href="../_static/rtd.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.1-7fffb5f',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../_static/searchtools.js"></script>
    <link rel="top" title="SAGA 0.1-7fffb5f documentation" href="../index.html" />
    <link rel="up" title="3. Tutorial" href="index.html" />
    <link rel="prev" title="4. Part 4: Adding File Transfer" href="part4.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="part4.html" title="4. Part 4: Adding File Transfer"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">SAGA 0.1-7fffb5f documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">3. Tutorial</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="part-5-a-more-complex-example-mandelbrot">
<h1>5. Part 5: A More Complex Example: Mandelbrot<a class="headerlink" href="#part-5-a-more-complex-example-mandelbrot" title="Permalink to this headline">¶</a></h1>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If you want to run the Mandelbrot example on OSG with Condor, please refer to the OSG-specific instructions: <em class="xref std std-ref">tutorial_mandelbrot_osg</em>.</p>
</div>
<p>In this example, we split up the calculation of a Mandelbrot set into several
tiles, submit a job for each tile using the SINON Job API, retrieve the tiles
using the SINON File API and stitch together the final image from the individual
tiles. This example shows how SINON can be used to create more complex
application workflows that involve multiple aspects of the API.</p>
<div class="section" id="hands-on-distributed-mandelbrot-fractals">
<h2>5.1. Hands-On: Distributed Mandelbrot Fractals<a class="headerlink" href="#hands-on-distributed-mandelbrot-fractals" title="Permalink to this headline">¶</a></h2>
<p>In order for this example to work, we need to install an additional Python
module, the Python Image Library (PIL). This is done via pip:</p>
<div class="highlight-bash"><div class="highlight"><pre>pip install PIL
</pre></div>
</div>
<p>Next, we need to download the Mandelbrot fractal generator itself as well as the
shell wrapper scrip. It is really just a very simple python script that, if
invoked on the command line, outputs a full or part of a Mandelbrot fractal as a
PNG image. Download the scripts into your $HOME directory:</p>
<div class="highlight-bash"><div class="highlight"><pre>curl --insecure -Os https://raw.github.com/saga-project/sinon/devel/examples/tutorial/mandelbrot/mandelbrot.py
curl --insecure -Os https://raw.github.com/saga-project/sinon/devel/examples/tutorial/mandelbrot/mandelbrot.sh
</pre></div>
</div>
<p>You can give mandelbrot.py a test-drive locally by calculating a single-tiled
1024x1024 Mandelbrot fractal:</p>
<div class="highlight-bash"><div class="highlight"><pre>python mandelbrot.py 1024 1024 0 1024 0 1024 frac.gif
</pre></div>
</div>
<p>In your <tt class="docutils literal"><span class="pre">$HOME</span></tt> directory, open a new file sinon_mandelbrot.py with your
favorite editor and paste the following content:</p>
<p>Look at the code and change the constants at the very top accordingly. Then
run it. The output should look something like this:</p>
<div class="highlight-bash"><div class="highlight"><pre>python sinon_mandelbrot.py

* Submitted <span class="o">[</span>ssh://india.futuregrid.org<span class="o">]</span>-<span class="o">[</span>4073<span class="o">]</span>. Output will be written to: tile_x0_y0.gif
* Submitted <span class="o">[</span>ssh://india.futuregrid.org<span class="o">]</span>-<span class="o">[</span>4094<span class="o">]</span>. Output will be written to: tile_x0_y1.gif
* Submitted <span class="o">[</span>ssh://india.futuregrid.org<span class="o">]</span>-<span class="o">[</span>4116<span class="o">]</span>. Output will be written to: tile_x1_y0.gif
* Submitted <span class="o">[</span>ssh://india.futuregrid.org<span class="o">]</span>-<span class="o">[</span>4144<span class="o">]</span>. Output will be written to: tile_x1_y1.gif
* Job <span class="o">[</span>ssh://india.futuregrid.org<span class="o">]</span>-<span class="o">[</span>4073<span class="o">]</span> status: Running
* Job <span class="o">[</span>ssh://india.futuregrid.org<span class="o">]</span>-<span class="o">[</span>4094<span class="o">]</span> status: Running
* Job <span class="o">[</span>ssh://india.futuregrid.org<span class="o">]</span>-<span class="o">[</span>4116<span class="o">]</span> status: Running
* Job <span class="o">[</span>ssh://india.futuregrid.org<span class="o">]</span>-<span class="o">[</span>4144<span class="o">]</span> status: Running

* Job <span class="o">[</span>ssh://india.futuregrid.org<span class="o">]</span>-<span class="o">[</span>4073<span class="o">]</span> status: Running
* Job <span class="o">[</span>ssh://india.futuregrid.org<span class="o">]</span>-<span class="o">[</span>4094<span class="o">]</span> status: Running
* Job <span class="o">[</span>ssh://india.futuregrid.org<span class="o">]</span>-<span class="o">[</span>4116<span class="o">]</span> status: Running
* Job <span class="o">[</span>ssh://india.futuregrid.org<span class="o">]</span>-<span class="o">[</span>4144<span class="o">]</span> status: Running

* Job <span class="o">[</span>ssh://india.futuregrid.org<span class="o">]</span>-<span class="o">[</span>4073<span class="o">]</span> status: Done
* Job <span class="o">[</span>ssh://india.futuregrid.org<span class="o">]</span>-<span class="o">[</span>4116<span class="o">]</span> status: Running
* Job <span class="o">[</span>ssh://india.futuregrid.org<span class="o">]</span>-<span class="o">[</span>4144<span class="o">]</span> status: Running

* Job <span class="o">[</span>ssh://india.futuregrid.org<span class="o">]</span>-<span class="o">[</span>4094<span class="o">]</span> status: Done
* Job <span class="o">[</span>ssh://india.futuregrid.org<span class="o">]</span>-<span class="o">[</span>4144<span class="o">]</span> status: Done

* Job <span class="o">[</span>ssh://india.futuregrid.org<span class="o">]</span>-<span class="o">[</span>4116<span class="o">]</span> status: Done

* Copying sftp://india.futuregrid.org//N/u/oweidner/sftp://india.futuregrid.org//N/u/oweidner/mbrot//tile_x0_y0.gif back to /Users/oweidner/MB
* Copying sftp://india.futuregrid.org//N/u/oweidner/sftp://india.futuregrid.org//N/u/oweidner/mbrot//tile_x0_y1.gif back to /Users/oweidner/MB
* Copying sftp://india.futuregrid.org//N/u/oweidner/sftp://india.futuregrid.org//N/u/oweidner/mbrot//tile_x1_y0.gif back to /Users/oweidner/MB
* Copying sftp://india.futuregrid.org//N/u/oweidner/sftp://india.futuregrid.org//N/u/oweidner/mbrot//tile_x1_y1.gif back to /Users/oweidner/MB
* Stitching together the whole fractal: mandelbrot_full.gif
</pre></div>
</div>
<p>Open mandelbrot_full.gif with your favorite image editor. It should look like the image below.
The different tile*.gif files (open them if you want) were computed on &#8216;REMOTE_HOST&#8217;, transfered back and stitched together as the full image.</p>
<img alt="../_images/mandelbrot_full.gif" src="../_images/mandelbrot_full.gif" />
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">5. Part 5: A More Complex Example: Mandelbrot</a><ul>
<li><a class="reference internal" href="#hands-on-distributed-mandelbrot-fractals">5.1. Hands-On: Distributed Mandelbrot Fractals</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="part4.html"
                        title="previous chapter">4. Part 4: Adding File Transfer</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/tutorial/part5.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="part4.html" title="4. Part 4: Adding File Transfer"
             >previous</a> |</li>
        <li><a href="../index.html">SAGA 0.1-7fffb5f documentation</a> &raquo;</li>
          <li><a href="index.html" >3. Tutorial</a> &raquo;</li> 
      </ul>
    </div>
<div class="footer">
    &copy; Copyright 2012, The SAGA Project.
  Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
  <br />Theme based on <a href="http://readthedocs.org/">Read The Docs</a>

</div>





  </body>
</html>